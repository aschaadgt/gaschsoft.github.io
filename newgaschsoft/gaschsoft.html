<!doctype html>
<html lang="es" data-theme="light">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>GaschSoft</title>

  <style>
    :root{
      /* Light */
      --bg: #F8FAFC;
      --card: #EEF2F7;
      --text: #0F172A;
      --muted: #475569;

      --primary: #1F7AFF;
      --accent: #38BDF8;

      --border: rgba(15, 23, 42, 0.12);
      --shadow: 0 10px 30px rgba(2, 8, 23, 0.10);

      --header-bg: rgba(248, 250, 252, 0.72);
      --header-border: rgba(15, 23, 42, 0.10);

      --icon-btn-bg: rgba(15, 23, 42, 0.06);
      --icon-btn-bg-hover: rgba(15, 23, 42, 0.10);
      --icon-btn-border: rgba(15, 23, 42, 0.10);

      --menu-bg: rgba(248, 250, 252, 0.92);
      --menu-border: rgba(15, 23, 42, 0.12);

      --link-hover-bg: rgba(31, 122, 255, 0.10);
      --link-hover-border: rgba(31, 122, 255, 0.18);
    }

    html[data-theme="dark"]{
      --bg: #0B0F14;
      --card: #111827;
      --text: #E5E7EB;
      --muted: #9CA3AF;

      --primary: #1F7AFF;   /* se mantiene */
      --accent: #38BDF8;

      --border: rgba(229, 231, 235, 0.10);
      --shadow: 0 12px 40px rgba(0,0,0,0.40);

      --header-bg: rgba(11, 15, 20, 0.68);
      --header-border: rgba(229, 231, 235, 0.10);

      --icon-btn-bg: rgba(229, 231, 235, 0.06);
      --icon-btn-bg-hover: rgba(229, 231, 235, 0.10);
      --icon-btn-border: rgba(229, 231, 235, 0.10);

      --menu-bg: rgba(11, 15, 20, 0.92);
      --menu-border: rgba(229, 231, 235, 0.12);

      --link-hover-bg: rgba(31, 122, 255, 0.14);
      --link-hover-border: rgba(31, 122, 255, 0.22);
    }

    *{ box-sizing: border-box; }
    body{
      margin:0;
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Arial, "Noto Sans", "Helvetica Neue", sans-serif;
      background: var(--bg);
      color: var(--text);
    }

    /* ===== Header ===== */
    .header{
      position: sticky;
      top: 0;
      z-index: 50;
      backdrop-filter: blur(10px);
      -webkit-backdrop-filter: blur(10px);
      background: var(--header-bg);
      border-bottom: 1px solid var(--header-border);
    }

    .header-inner{
      max-width: 1200px;
      margin: 0 auto;
      padding: 12px 16px;
      display: flex;
      align-items: center;
      gap: 14px;
    }

    .brand{
      display:flex;
      align-items:center;
      gap: 10px;
      min-width: 240px;
    }

    /* Logo SIN contenedor: solo el PNG */
    .brand-logo{
      width: 42px;
      height: 42px;
      flex: 0 0 auto;
      display:block;
      object-fit: contain;
    }

    .brand-text{
      display:flex;
      flex-direction: column;
      line-height: 1.05;
      gap: 2px;
      min-width: 0;
    }

    .brand-typing{
      font-weight: 800;
      letter-spacing: 0.2px;
      font-size: 16px;
      display:flex;
      align-items:center;
      gap: 6px;
      user-select:none;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }

    .caret{
      width: 10px;
      height: 18px;
      border-left: 2px solid var(--primary);
      opacity: 0.9;
      animation: blink 0.9s infinite;
      transform: translateY(1px);
    }

    @keyframes blink{
      0%, 45%{ opacity: 1; }
      55%, 100%{ opacity: 0; }
    }

    .brand-sub{
      font-size: 12px;
      color: var(--muted);
      letter-spacing: 0.2px;
      white-space: nowrap;
    }

    /* Nav */
    .nav{
      display:flex;
      align-items:center;
      gap: 8px;
      margin-left: auto;
      position: relative;
    }

    .nav-links{
      display:flex;
      align-items:center;
      gap: 6px;
    }

    .nav-link, .nav-dd-btn{
      appearance: none;
      border: 1px solid transparent;
      background: transparent;
      color: var(--text);
      font-weight: 600;
      font-size: 14px;
      padding: 10px 10px;
      border-radius: 12px;
      cursor: pointer;
      transition: background 160ms ease, border-color 160ms ease, transform 160ms ease;
      text-decoration: none;
      display:flex;
      align-items:center;
      gap: 8px;
      white-space: nowrap;
    }

    .nav-link:hover, .nav-dd-btn:hover{
      background: var(--link-hover-bg);
      border-color: var(--link-hover-border);
    }

    .nav-link:active, .nav-dd-btn:active{ transform: translateY(1px); }

    .chev{
      width: 10px;
      height: 10px;
      border-right: 2px solid var(--muted);
      border-bottom: 2px solid var(--muted);
      transform: rotate(45deg);
      margin-top: -2px;
      transition: transform 160ms ease;
    }

    /* Icon buttons (Language + Theme) */
    .icon-actions{
      display:flex;
      align-items:center;
      gap: 10px;
      margin-left: 8px;
    }

    .icon-btn{
      width: 40px;
      height: 40px;
      border-radius: 999px;
      border: 1px solid var(--icon-btn-border);
      background: var(--icon-btn-bg);
      display:grid;
      place-items:center;
      cursor: pointer;
      transition: background 160ms ease, transform 160ms ease, border-color 160ms ease;
      position: relative;
    }

    .icon-btn:hover{
      background: var(--icon-btn-bg-hover);
      border-color: rgba(31, 122, 255, 0.30);
    }

    .icon-btn:active{ transform: translateY(1px); }

    .icon-btn img{
      width: 20px;
      height: 20px;
      display:block;
    }

    /* Dropdown menus */
    .dropdown{ position: relative; }

    .menu{
      position: absolute;
      top: calc(100% + 10px);
      right: 0;
      min-width: 220px;
      background: var(--menu-bg);
      border: 1px solid var(--menu-border);
      border-radius: 14px;
      box-shadow: var(--shadow);
      padding: 8px;
      display:none;
    }

    .menu.open{ display:block; }

    .menu-item{
      width: 100%;
      text-align: left;
      border: 1px solid transparent;
      background: transparent;
      color: var(--text);
      padding: 10px 10px;
      border-radius: 12px;
      cursor: pointer;
      display:flex;
      align-items:center;
      gap: 10px;
      font-weight: 700;
      font-size: 13px;
      transition: background 160ms ease, border-color 160ms ease;
    }

    .menu-item:hover{
      background: rgba(31, 122, 255, 0.12);
      border-color: rgba(31, 122, 255, 0.20);
    }

    .menu-item[aria-selected="true"]{
      background: rgba(31, 122, 255, 0.18);
      border-color: rgba(31, 122, 255, 0.28);
    }

    .flag{
      width: 18px;
      height: 18px;
      border-radius: 6px;
      border: 1px solid var(--border);
      background: var(--card);
      object-fit: cover;
      flex: 0 0 auto;
    }

    .check{
      margin-left: auto;
      width: 16px;
      height: 16px;
      border-radius: 6px;
      border: 1px solid var(--border);
      display:grid;
      place-items:center;
      font-size: 12px;
      color: var(--primary);
      opacity: 0;
      transition: opacity 120ms ease;
    }
    .menu-item[aria-selected="true"] .check{ opacity: 1; }

    /* ===== Servicios: abrir con hover ===== */
    .dropdown.services:hover .menu,
    .dropdown.services:focus-within .menu{
      display:block;
    }
    .dropdown.services:hover .chev,
    .dropdown.services:focus-within .chev{
      transform: rotate(225deg); /* flecha arriba */
    }

    /* Mobile */
    .burger{
      display:none;
      width: 42px;
      height: 42px;
      border-radius: 14px;
      border: 1px solid var(--icon-btn-border);
      background: var(--icon-btn-bg);
      cursor: pointer;
      transition: background 160ms ease, transform 160ms ease;
      place-items:center;
    }
    .burger:hover{ background: var(--icon-btn-bg-hover); }
    .burger:active{ transform: translateY(1px); }

    .burger-lines{ width: 18px; height: 12px; position: relative; }
    .burger-lines span{
      position:absolute; left:0; right:0;
      height:2px; background: var(--text); border-radius: 3px;
      opacity: 0.9;
    }
    .burger-lines span:nth-child(1){ top:0; }
    .burger-lines span:nth-child(2){ top:5px; opacity: 0.7; }
    .burger-lines span:nth-child(3){ top:10px; }

    @media (max-width: 920px){
      .brand{ min-width: 180px; }
      .nav-links{
        display:none;
        position:absolute;
        top: 66px;
        right: 16px;
        left: 16px;
        background: var(--menu-bg);
        border: 1px solid var(--menu-border);
        border-radius: 16px;
        padding: 10px;
        box-shadow: var(--shadow);
        flex-direction: column;
        align-items: stretch;
        gap: 6px;
      }
      .nav-links.open{ display:flex; }
      .nav-link, .nav-dd-btn{ justify-content: space-between; }
      .burger{ display:grid; }
      .icon-actions{ margin-left: 0; }
      .nav{ gap: 10px; }
      /* En mobile, Servicios vuelve a click (hover no es confiable) */
      .dropdown.services:hover .menu{ display:none; }
      .dropdown.services .menu.open{ display:block; }
      .dropdown.services .chev.up{ transform: rotate(225deg); }
    }

    main{
      max-width: 1200px;
      margin: 0 auto;
      padding: 34px 16px 80px;
    }
    .hero{
      border: 1px solid var(--border);
      background: linear-gradient(180deg, rgba(31,122,255,0.10), transparent);
      border-radius: 22px;
      padding: 22px;
      box-shadow: var(--shadow);
    }
    .hero h1{ margin: 0 0 8px; font-size: 28px; letter-spacing: -0.3px; }
    .hero p{ margin: 0; color: var(--muted); max-width: 70ch; line-height: 1.5; }
  </style>
</head>

<body>
  <header class="header" role="banner">
    <div class="header-inner">
      <!-- Brand -->
      <div class="brand" aria-label="GaschSoft">
        <img id="brandLogo" class="brand-logo" src="Logos/GaschSoft.png" alt="GaschSoft logo" />

        <div class="brand-text">
          <div class="brand-typing" aria-label="GaschSoft">
            <span id="typingText">GaschSoft</span>
            <span class="caret" aria-hidden="true"></span>
          </div>
          <div class="brand-sub" id="brandSub">Soluciones digitales, sin humo.</div>
        </div>
      </div>

      <!-- Nav -->
      <nav class="nav" aria-label="Navegación principal">
        <button class="burger" id="burgerBtn" type="button" aria-label="Abrir menú" aria-expanded="false">
          <div class="burger-lines" aria-hidden="true">
            <span></span><span></span><span></span>
          </div>
        </button>

        <div class="nav-links" id="navLinks">
          <!-- Servicios dropdown (hover) -->
          <div class="dropdown services" id="servicesDD">
            <button class="nav-dd-btn" id="servicesBtn" type="button" aria-haspopup="true" aria-expanded="false">
              <span id="navServices">Servicios</span>
              <span class="chev" id="servicesChev" aria-hidden="true"></span>
            </button>

            <div class="menu" role="menu" aria-label="Servicios" id="servicesMenu">
              <button class="menu-item" role="menuitem" type="button" data-service="web">
                <span id="svcWeb">Desarrollo Web</span>
              </button>

              <button class="menu-item" role="menuitem" type="button" data-service="it">
                <span id="svcIT">Soporte IT</span>
              </button>

              <button class="menu-item" role="menuitem" type="button" data-service="invites">
                <span id="svcInv">Invitaciones Web</span>
              </button>

              <button class="menu-item" role="menuitem" type="button" data-service="auto">
                <span id="svcAuto">Automatizaciones</span>
              </button>
            </div>
          </div>

          <a class="nav-link" href="#portfolio" id="navPortfolio">Portafolio</a>
          <a class="nav-link" href="#about" id="navAbout">Nosotros</a>
          <a class="nav-link" href="#contact" id="navContact">Contacto</a>
        </div>

        <!-- Right icon actions -->
        <div class="icon-actions">
          <!-- Language dropdown -->
          <div class="dropdown" id="langDD">
            <button class="icon-btn" id="langBtn" type="button" aria-label="Idioma" aria-haspopup="true" aria-expanded="false">
              <img id="langIcon" src="Logos/idiomas.png" alt="" />
            </button>

            <div class="menu" role="menu" aria-label="Selector de idioma" id="langMenu">
              <button class="menu-item" role="menuitem" type="button" data-lang="es" aria-selected="true">
                <img class="flag" src="Logos/ES.png" alt="ES" />
                <span>Español</span>
                <span class="check" aria-hidden="true">✓</span>
              </button>
              <button class="menu-item" role="menuitem" type="button" data-lang="en" aria-selected="false">
                <img class="flag" src="Logos/US.png" alt="US" />
                <span>English</span>
                <span class="check" aria-hidden="true">✓</span>
              </button>
            </div>
          </div>

          <!-- Theme (3-state) -->
          <button class="icon-btn" id="themeBtn" type="button" aria-label="Cambiar modo (Sistema/Claro/Oscuro)">
            <img id="themeIcon" src="Logos/sistema.png" alt="" />
          </button>
        </div>
      </nav>
    </div>
  </header>

  <main>
    <section class="hero">
      <h1 id="heroTitle">GaschSoft: software y soporte con mentalidad de producto.</h1>
      <p id="heroDesc">
        Header vivo (typing), dark/light + modo sistema, selector de idioma, y menú de servicios en hover.
      </p>
    </section>
  </main>

  <script>
    (function () {
      const elHtml = document.documentElement;

      // ===== Assets (newgaschsoft/Logos/*) =====
      const ASSETS = {
        brand: {
          light: "Logos/Ico GaschSoft.png",
          dark: "Logos/Ico GaschSoft - dark.png",
        },
        langIcon: {
          light: "Logos/idiomas.png",
          dark: "Logos/idiomas - dark.png",
        },
        theme: {
          system: { light: "Logos/sistema.png", dark: "Logos/sistema - dark.png" },
          light:  "Logos/obscuro.png", // desde claro: ofrecer pasar a oscuro
          dark:   "Logos/claro.png"   // desde oscuro: ofrecer pasar a claro
        }
      };

      // ===== i18n (mínimo) =====
      const I18N = {
        es: {
          brandSub: "Soluciones digitales, sin humo.",
          nav: { services: "Servicios", portfolio: "Portafolio", contact: "Contacto", about: "Nosotros" },
          services: { web:"Desarrollo Web", it:"Soporte IT", invites:"Invitaciones Web", auto:"Automatizaciones" },
          hero: {
            title: "GaschSoft: software y soporte con mentalidad de producto.",
            desc: "Header vivo (typing), dark/light + modo sistema, selector de idioma, y menú de servicios en hover."
          }
        },
        en: {
          brandSub: "Digital solutions, no nonsense.",
          nav: { services: "Services", portfolio: "Portfolio", contact: "Contact", about: "About" },
          services: { web:"Web Development", it:"IT Support", invites:"Web Invitations", auto:"Automations" },
          hero: {
            title: "GaschSoft: software and support with a product mindset.",
            desc: "Lively header (typing), dark/light + system mode, language selector, and hover services menu."
          }
        }
      };

      // ===== Storage =====
      const STORAGE = {
        themeMode: "gaschsoft_theme_mode", // "system" | "light" | "dark"
        lang: "gaschsoft_lang"
      };

      // ===== Elements =====
      const brandLogo = document.getElementById("brandLogo");
      const langIcon  = document.getElementById("langIcon");
      const themeIcon = document.getElementById("themeIcon");

      const brandSub  = document.getElementById("brandSub");
      const navServices = document.getElementById("navServices");
      const navPortfolio = document.getElementById("navPortfolio");
      const navContact = document.getElementById("navContact");
      const navAbout = document.getElementById("navAbout");

      const svcWeb = document.getElementById("svcWeb");
      const svcIT = document.getElementById("svcIT");
      const svcInv = document.getElementById("svcInv");
      const svcAuto = document.getElementById("svcAuto");

      const heroTitle = document.getElementById("heroTitle");
      const heroDesc = document.getElementById("heroDesc");

      const langBtn = document.getElementById("langBtn");
      const langMenu = document.getElementById("langMenu");
      const langItems = Array.from(langMenu.querySelectorAll("[data-lang]"));

      const themeBtn = document.getElementById("themeBtn");

      const burgerBtn = document.getElementById("burgerBtn");
      const navLinks = document.getElementById("navLinks");

      const servicesDD = document.getElementById("servicesDD");
      const servicesBtn = document.getElementById("servicesBtn");
      const servicesMenu = document.getElementById("servicesMenu");
      const servicesChev = document.getElementById("servicesChev");

      // ===== Theme resolution =====
      const mediaDark = window.matchMedia ? window.matchMedia("(prefers-color-scheme: dark)") : null;

      function getSavedThemeMode(){
        const v = localStorage.getItem(STORAGE.themeMode);
        return (v === "light" || v === "dark" || v === "system") ? v : "system";
      }

      function getSavedLang(){
        const v = localStorage.getItem(STORAGE.lang);
        return (v === "es" || v === "en") ? v : "es";
      }

      let state = {
        themeMode: getSavedThemeMode(), // system default
        lang: getSavedLang()
      };

      function resolvedTheme(){
        if (state.themeMode === "light") return "light";
        if (state.themeMode === "dark") return "dark";
        // system
        if (mediaDark && mediaDark.matches) return "dark";
        return "light";
      }

      function applyTheme(){
        const theme = resolvedTheme();
        elHtml.setAttribute("data-theme", theme);

        // Brand + language icon swap based on THEME (no en themeMode)
        brandLogo.src = (theme === "dark") ? ASSETS.brand.dark : ASSETS.brand.light;
        langIcon.src  = (theme === "dark") ? ASSETS.langIcon.dark : ASSETS.langIcon.light;

        // Theme button icon:
        // - system: sistema.png / sistema - dark.png según theme resultante
        // - light: mostramos icono para "ir a oscuro" (obscuro.png)
        // - dark: mostramos icono para "ir a claro" (claro.png)
        if (state.themeMode === "system") {
          themeIcon.src = (theme === "dark") ? ASSETS.theme.system.dark : ASSETS.theme.system.light;
        } else if (state.themeMode === "light") {
          themeIcon.src = ASSETS.theme.light;
        } else {
          themeIcon.src = ASSETS.theme.dark;
        }
      }

      function cycleThemeMode(){
        // system -> light -> dark -> system
        state.themeMode = (state.themeMode === "system") ? "light" : (state.themeMode === "light") ? "dark" : "system";
        localStorage.setItem(STORAGE.themeMode, state.themeMode);
        applyTheme();
      }

      // React to device theme changes when in system mode
      if (mediaDark) {
        mediaDark.addEventListener?.("change", () => {
          if (state.themeMode === "system") applyTheme();
        });
      }

      // ===== i18n apply =====
      function applyLang(lang){
        state.lang = lang;
        localStorage.setItem(STORAGE.lang, lang);

        const t = I18N[lang];

        brandSub.textContent = t.brandSub;
        navServices.textContent = t.nav.services;
        navPortfolio.textContent = t.nav.portfolio;
        navContact.textContent = t.nav.contact;
        navAbout.textContent = t.nav.about;

        svcWeb.textContent = t.services.web;
        svcIT.textContent = t.services.it;
        svcInv.textContent = t.services.invites;
        svcAuto.textContent = t.services.auto;

        heroTitle.textContent = t.hero.title;
        heroDesc.textContent = t.hero.desc;

        // Selected UI
        langItems.forEach(item => {
          const isSelected = item.getAttribute("data-lang") === lang;
          item.setAttribute("aria-selected", isSelected ? "true" : "false");
        });

        document.documentElement.lang = (lang === "en") ? "en" : "es";
      }

      // ===== Typing effect (cíclico) =====
      const typingEl = document.getElementById("typingText");
      const words = ["GaschSoft", "GaschSoft", "GaschSoft"];
      let w = 0, i = 0, dir = 1;
      const TYPE_SPEED = 85, DELETE_SPEED = 45, HOLD_MS = 900;

      function tick() {
        const word = words[w];
        if (dir === 1) {
          i++;
          typingEl.textContent = word.slice(0, i);
          if (i >= word.length) {
            setTimeout(() => { dir = -1; tick(); }, HOLD_MS);
            return;
          }
          setTimeout(tick, TYPE_SPEED);
        } else {
          i--;
          typingEl.textContent = word.slice(0, Math.max(0, i));
          if (i <= 0) {
            dir = 1;
            w = (w + 1) % words.length;
            setTimeout(tick, 220);
            return;
          }
          setTimeout(tick, DELETE_SPEED);
        }
      }

      // ===== Dropdown: Language (click) =====
      function closeLangMenu(){
        langMenu.classList.remove("open");
        langBtn.setAttribute("aria-expanded", "false");
      }
      function toggleLangMenu(){
        const open = !langMenu.classList.contains("open");
        if (open){
          langMenu.classList.add("open");
          langBtn.setAttribute("aria-expanded", "true");
        } else {
          closeLangMenu();
        }
      }

      langBtn.addEventListener("click", (e) => {
        e.stopPropagation();
        toggleLangMenu();
      });

      langItems.forEach(item => {
        item.addEventListener("click", (e) => {
          e.stopPropagation();
          applyLang(item.getAttribute("data-lang"));
          closeLangMenu();
        });
      });

      document.addEventListener("click", () => {
        closeLangMenu();
        // cierre del menú mobile
        navLinks.classList.remove("open");
        burgerBtn.setAttribute("aria-expanded", "false");
        // cierre de servicios en mobile
        servicesMenu.classList.remove("open");
        servicesChev.classList.remove("up");
        servicesBtn.setAttribute("aria-expanded", "false");
      });

      document.addEventListener("keydown", (e) => {
        if (e.key === "Escape") {
          closeLangMenu();
          servicesMenu.classList.remove("open");
          servicesChev.classList.remove("up");
          servicesBtn.setAttribute("aria-expanded", "false");
        }
      });

      // ===== Theme button =====
      themeBtn.addEventListener("click", (e) => {
        e.stopPropagation();
        cycleThemeMode();
        closeLangMenu();
      });

      // ===== Mobile burger =====
      burgerBtn.addEventListener("click", (e) => {
        e.stopPropagation();
        const open = navLinks.classList.toggle("open");
        burgerBtn.setAttribute("aria-expanded", open ? "true" : "false");
        closeLangMenu();
      });
      navLinks.addEventListener("click", (e) => e.stopPropagation());

      // ===== Servicios: hover en desktop, click en mobile =====
      // En mobile necesitamos click, porque hover no existe.
      function isMobile(){
        return window.matchMedia && window.matchMedia("(max-width: 920px)").matches;
      }

      servicesBtn.addEventListener("click", (e) => {
        if (!isMobile()) return; // desktop: hover manda
        e.preventDefault();
        e.stopPropagation();
        closeLangMenu();

        const open = !servicesMenu.classList.contains("open");
        servicesMenu.classList.toggle("open", open);
        servicesBtn.setAttribute("aria-expanded", open ? "true" : "false");
        servicesChev.classList.toggle("up", open);
      });

      // Evita que click dentro del menú cierre todo (en mobile)
      servicesMenu.addEventListener("click", (e) => e.stopPropagation());

      // ===== Init =====
      applyTheme();
      applyLang(state.lang);
      setTimeout(tick, 450);
    })();
  </script>
</body>
</html>
