<!doctype html>
<html lang="es" data-theme="light">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>GaschSoft</title>

  <style>
    :root{
      /* Light */
      --bg: #F8FAFC;
      --card: #EEF2F7;
      --text: #0F172A;
      --muted: #475569;

      --primary: #1F7AFF;
      --accent: #38BDF8;

      --border: rgba(15, 23, 42, 0.12);
      --shadow: 0 10px 30px rgba(2, 8, 23, 0.10);

      --header-bg: rgba(248, 250, 252, 0.72);
      --header-border: rgba(15, 23, 42, 0.10);

      --icon-btn-bg: rgba(15, 23, 42, 0.06);
      --icon-btn-bg-hover: rgba(15, 23, 42, 0.10);
      --icon-btn-border: rgba(15, 23, 42, 0.10);

      --menu-bg: rgba(248, 250, 252, 0.92);
      --menu-border: rgba(15, 23, 42, 0.12);

      --link-hover-bg: rgba(31, 122, 255, 0.10);
      --link-hover-border: rgba(31, 122, 255, 0.18);
    }

    html[data-theme="dark"]{
      --bg: #0B0F14;
      --card: #111827;
      --text: #E5E7EB;
      --muted: #9CA3AF;

      --primary: #1F7AFF;   /* se mantiene */
      --accent: #38BDF8;

      --border: rgba(229, 231, 235, 0.10);
      --shadow: 0 12px 40px rgba(0,0,0,0.40);

      --header-bg: rgba(11, 15, 20, 0.68);
      --header-border: rgba(229, 231, 235, 0.10);

      --icon-btn-bg: rgba(229, 231, 235, 0.06);
      --icon-btn-bg-hover: rgba(229, 231, 235, 0.10);
      --icon-btn-border: rgba(229, 231, 235, 0.10);

      --menu-bg: rgba(11, 15, 20, 0.92);
      --menu-border: rgba(229, 231, 235, 0.12);

      --link-hover-bg: rgba(31, 122, 255, 0.14);
      --link-hover-border: rgba(31, 122, 255, 0.22);
    }

    *{ box-sizing: border-box; }
    body{
      margin:0;
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Arial, "Noto Sans", "Helvetica Neue", sans-serif;
      background: var(--bg);
      color: var(--text);
    }

    /* ===== Header ===== */
    .header{
      position: sticky;
      top: 0;
      z-index: 50;
      backdrop-filter: blur(10px);
      -webkit-backdrop-filter: blur(10px);
      background: var(--header-bg);
      border-bottom: 1px solid var(--header-border);
    }

    .header-inner{
      max-width: 1200px;
      margin: 0 auto;
      padding: 12px 16px;
      display: flex;
      align-items: center;
      gap: 14px;
    }

    .brand{
      display:flex;
      align-items:flex-start;
      gap: 10px;
      min-width: 240px;
    }

    .brand-logo{
      width: 55px;
      height: 55px;
      transform: translateY(2px);
      flex: 0 0 auto;
      display:block;
      object-fit: contain;
    }

    .brand-text{
      display:flex;
      flex-direction: column;
      line-height: 1.1;
      gap: 2px;
      min-width: 0;
    }

    .brand-typing{
      font-weight: 600;
      letter-spacing: 0.2px;
      font-size: 20px;
      font-family: "Open Sauce", "OpenSauce", ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
      display:flex;
      align-items:center;
      gap: 6px;
      user-select:none;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }

    .caret{
      width: 10px;
      height: 18px;
      border-left: 2px solid var(--primary);
      opacity: 0.9;
      animation: blink 0.9s infinite;
      transform: translateY(1px);
    }

    @keyframes blink{
      0%, 45%{ opacity: 1; }
      55%, 100%{ opacity: 0; }
    }

    .brand-sub{
      font-size: 12px;
      color: var(--muted);
      letter-spacing: 0.2px;
      white-space: nowrap;
    }

    /* Nav */
    .nav{
      display:flex;
      align-items:center;
      gap: 8px;
      margin-left: auto;
      position: relative;
    }

    .nav-links{
      display:flex;
      align-items:center;
      gap: 6px;
    }

    .nav-link, .nav-dd-btn{
      appearance: none;
      border: 1px solid transparent;
      background: transparent;
      color: var(--text);
      font-weight: 600;
      font-size: 14px;
      padding: 10px 10px;
      border-radius: 12px;
      cursor: pointer;
      transition: background 160ms ease, border-color 160ms ease, transform 160ms ease;
      text-decoration: none;
      display:flex;
      align-items:center;
      gap: 8px;
      white-space: nowrap;
    }

    .nav-link:hover, .nav-dd-btn:hover{
      background: var(--link-hover-bg);
      border-color: var(--link-hover-border);
    }

    .nav-link:active, .nav-dd-btn:active{ transform: translateY(1px); }

    /* Homologar <button> (Servicios) con <a> (Portafolio/Nosotros/Contacto) */
    button.nav-link{
      font: inherit;
      font-size: inherit;
      line-height: inherit;
      color: inherit;
      text-align: inherit;
    }
    button.nav-link::-moz-focus-inner{ border:0; padding:0; }

    .chev{
      width: 10px;
      height: 10px;
      border-right: 2px solid var(--muted);
      border-bottom: 2px solid var(--muted);
      transform: rotate(45deg);
      margin-top: -2px;
      transition: transform 160ms ease;
    }

    /* Icon buttons */
    .icon-actions{
      display:flex;
      align-items:center;
      gap: 10px;
      margin-left: 8px;
    }

    .icon-btn{
      width: 40px;
      height: 40px;
      border-radius: 999px;
      border: 1px solid var(--icon-btn-border);
      background: var(--icon-btn-bg);
      display:grid;
      place-items:center;
      cursor: pointer;
      transition: background 160ms ease, transform 160ms ease, border-color 160ms ease;
      position: relative;
    }

    .icon-btn:hover{
      background: var(--icon-btn-bg-hover);
      border-color: rgba(31, 122, 255, 0.30);
    }

    .icon-btn:active{ transform: translateY(1px); }

    .icon-btn img{
      width: 20px;
      height: 20px;
      display:block;
    }

    /* Dropdown (solo idioma) */
    .dropdown{ position: relative; }

    .menu{
      position: absolute;
      top: calc(100% + 8px);
      right: 0;
      min-width: 220px;
      background: var(--menu-bg);
      border: 1px solid var(--menu-border);
      border-radius: 14px;
      box-shadow: var(--shadow);
      padding: 8px;
      display:none;
    }

    .menu.open{ display:block; }

    .menu-item{
      width: 100%;
      text-align: left;
      border: 1px solid transparent;
      background: transparent;
      color: var(--text);
      padding: 10px 10px;
      border-radius: 12px;
      cursor: pointer;
      display:flex;
      align-items:center;
      gap: 10px;
      font-weight: 700;
      font-size: 13px;
      transition: background 160ms ease, border-color 160ms ease;
    }

    .menu-item:hover{
      background: rgba(31, 122, 255, 0.12);
      border-color: rgba(31, 122, 255, 0.20);
    }

    .menu-item[aria-selected="true"]{
      background: rgba(31, 122, 255, 0.18);
      border-color: rgba(31, 122, 255, 0.32);
    }

    /* Idiomas: ahorrar ancho (menos espacio vacio horizontal) */
    #langMenu{ min-width: 150px; }
    #langMenu .menu-item{ padding-left: 6px; padding-right: 6px; }

    .flag{
      width: 18px;
      height: 18px;
      border-radius: 999px;
      border: none;
      background: transparent;
      object-fit: cover;
      flex: 0 0 auto;
    }

    /* ===== Servicios: hover desktop ===== */
    .dropdown.services:hover .menu,
    .dropdown.services:focus-within .menu{
      display:block;
    }
    .dropdown.services:hover .chev,
    .dropdown.services:focus-within .chev{
      transform: rotate(225deg);
    }
    /* Servicios: mantener hover (sin "hueco") y centrar menu bajo el boton */
    .dropdown.services{ padding-bottom: 0; }
    .dropdown.services .menu{
      left: 50%; right: auto; transform: translateX(-50%);
      top: calc(100% + 6px);
    }
    /* Puente invisible para que el hover no se caiga al mover el puntero al menu */
    .dropdown.services .menu::before{
      content: "";
      position: absolute;
      left: 0; right: 0;
      top: -10px;
      height: 10px;
    }

    /* Mobile */
    .burger{
      display:none;
      width: 42px;
      height: 42px;
      border-radius: 14px;
      border: 1px solid var(--icon-btn-border);
      background: var(--icon-btn-bg);
      cursor: pointer;
      transition: background 160ms ease, transform 160ms ease;
      place-items:center;
    }
    .burger:hover{ background: var(--icon-btn-bg-hover); }
    .burger:active{ transform: translateY(1px); }

    .burger-lines{ width: 18px; height: 12px; position: relative; }
    .burger-lines span{
      position:absolute; left:0; right:0;
      height:2px; background: var(--text); border-radius: 3px;
      opacity: 0.9;
    }
    .burger-lines span:nth-child(1){ top:0; }
    .burger-lines span:nth-child(2){ top:5px; opacity: 0.7; }
    .burger-lines span:nth-child(3){ top:10px; }


    @media (max-width: 920px){
      .brand{ min-width: 180px; }
      .nav-links{
        display:none;
        position:absolute;
        top: 66px;
        right: 16px;
        left: 16px;
        background: var(--menu-bg);
        border: 1px solid var(--menu-border);
        border-radius: 16px;
        padding: 10px;
        box-shadow: var(--shadow);
        flex-direction: column;
        align-items: stretch;
        gap: 6px;
      }
      .nav-links.open{ display:flex; }
      .nav-link, .nav-dd-btn{ justify-content: space-between; }
      .burger{ display:grid; }
      .icon-actions{ margin-left: 0; }
      .nav{ gap: 10px; }

      /* Servicios click en mobile */
      .dropdown.services:hover .menu{ display:none; }
      .dropdown.services .menu.open{ display:block; }
      .dropdown.services .chev.up{ transform: rotate(225deg); }
    }

    main{
      max-width: 1200px;
      margin: 0 auto;
      padding: 34px 16px 80px;
    }
    .hero{
      border: 1px solid var(--border);
      background: linear-gradient(180deg, rgba(31,122,255,0.10), transparent);
      border-radius: 22px;
      padding: 22px;
      box-shadow: var(--shadow);
    }
    .hero h1{ margin: 0 0 8px; font-size: 28px; letter-spacing: -0.3px; }
    .hero p{ margin: 0; color: var(--muted); max-width: 70ch; line-height: 1.5; }
  </style>
</head>

<body>
  <header class="header" role="banner">
    <div class="header-inner">
      <div class="brand" aria-label="GaschSoft">
        <img id="brandLogo" class="brand-logo" src="Logos/Ico GaschSoft.png" alt="GaschSoft logo" />
        <div class="brand-text">
          <div class="brand-typing" aria-label="GaschSoft">
            <span id="typingText">Gaschsoft</span>
            
          </div>
          <div class="brand-sub" id="brandSub">Soluciones digitales, sin humo.</div>
        </div>
      </div>

      <nav class="nav" aria-label="Navegación principal">
        <button class="burger" id="burgerBtn" type="button" aria-label="Abrir menú" aria-expanded="false">
          <div class="burger-lines" aria-hidden="true"><span></span><span></span><span></span></div>
        </button>

        <div class="nav-links" id="navLinks">
          <div class="dropdown services" id="servicesDD">
            <button class="nav-link nav-dd-btn" id="servicesBtn" type="button" aria-haspopup="true" aria-expanded="false">
              <span id="navServices">Servicios</span>
              <span class="chev" id="servicesChev" aria-hidden="true"></span>
            </button>

            <div class="menu" role="menu" aria-label="Servicios" id="servicesMenu">
              <button class="menu-item" role="menuitem" type="button" data-service="web"><span id="svcWeb">Desarrollo Web</span></button>
              <button class="menu-item" role="menuitem" type="button" data-service="it"><span id="svcIT">Soporte IT</span></button>
              <button class="menu-item" role="menuitem" type="button" data-service="invites"><span id="svcInv">Invitaciones Web</span></button>
              <button class="menu-item" role="menuitem" type="button" data-service="auto"><span id="svcAuto">Automatizaciones</span></button>
            </div>
          </div>

          
          <div class="dropdown services services-test" id="servicesTestDD">
            <a class="nav-link nav-dd-link" href="#services-test" id="servicesTestBtn" aria-haspopup="true" aria-expanded="false">
              <span>Servicios</span>
              <span class="chev" aria-hidden="true"></span>
            </a>
            <div class="menu" role="menu" aria-label="Servicios (test)">
              <button class="menu-item" role="menuitem" type="button">Desarrollo Web</button>
              <button class="menu-item" role="menuitem" type="button">Soporte IT</button>
              <button class="menu-item" role="menuitem" type="button">Invitaciones Web</button>
              <button class="menu-item" role="menuitem" type="button">Automatizaciones</button>
            </div>
          </div>

          <a class="nav-link" href="#portfolio" id="navPortfolio">Portafolio</a>
          <a class="nav-link" href="#about" id="navAbout">Nosotros</a>
          <a class="nav-link" href="#contact" id="navContact">Contacto</a>
        </div>

        <div class="icon-actions">
          <!-- Idioma -->
          <div class="dropdown" id="langDD">
            <button class="icon-btn" id="langBtn" type="button" aria-label="Idioma" aria-haspopup="true" aria-expanded="false">
              <img id="langIcon" src="Logos/idiomas.png" alt="" />
            </button>

            <div class="menu" role="menu" aria-label="Selector de idioma" id="langMenu">
              <button class="menu-item" role="menuitem" type="button" data-lang="es" aria-selected="true">
                <img class="flag" src="Logos/ES.png" alt="ES" />
                <span>Español</span>
              </button>
              <button class="menu-item" role="menuitem" type="button" data-lang="en" aria-selected="false">
                <img class="flag" src="Logos/US.png" alt="US" />
                <span>English</span>
              </button>
            </div>
          </div>

          <!-- Tema (Opción A: ciclo 3 estados) -->
          <button class="icon-btn" id="themeBtn" type="button" aria-label="Tema (Sistema/Oscuro/Claro)">
            <img id="themeIcon" src="Logos/sistema.png" alt="" />
          </button>
        </div>
      </nav>
    </div>
  </header>

  <main>
    <section class="hero">
      <h1 id="heroTitle">GaschSoft: software y soporte con mentalidad de producto.</h1>
      <p id="heroDesc">Header vivo (typing), tema con ciclo Sistema → Oscuro → Claro, selector de idioma, y menú de servicios en hover.</p>
    </section>
  </main>

  <script>
    (function () {
      const elHtml = document.documentElement;

      const ASSETS = {
        brand: { light: "Logos/Ico GaschSoft.png", dark: "Logos/Ico GaschSoft - dark.png" },
        langIcon: { light: "Logos/idiomas.png", dark: "Logos/idiomas - dark.png" },
        theme: {
          system: { light: "Logos/sistema.png", dark: "Logos/sistema - dark.png" },
          light: "Logos/claro.png",
          dark: "Logos/obscuro.png"
        }
      };

      const I18N = {
        es: {
          brandSub: "Soluciones digitales, sin humo.",
          nav: { services: "Servicios", portfolio: "Portafolio", contact: "Contacto", about: "Nosotros" },
          services: { web:"Desarrollo Web", it:"Soporte IT", invites:"Invitaciones Web", auto:"Automatizaciones" },
          hero: { title: "GaschSoft: software y soporte con mentalidad de producto.", desc: "Header vivo (typing), tema con ciclo Sistema → Oscuro → Claro, selector de idioma, y menú de servicios en hover." }
        },
        en: {
          brandSub: "Digital solutions, no nonsense.",
          nav: { services: "Services", portfolio: "Portfolio", contact: "Contact", about: "About" },
          services: { web:"Web Development", it:"IT Support", invites:"Web Invitations", auto:"Automations" },
          hero: { title: "GaschSoft: software and support with a product mindset.", desc: "Lively header (typing), theme cycle System → Dark → Light, language selector, and hover services menu." }
        }
      };

      const STORAGE = { themeMode: "gaschsoft_theme_mode", lang: "gaschsoft_lang" };

      const brandLogo = document.getElementById("brandLogo");
      const langIcon  = document.getElementById("langIcon");
      const themeIcon = document.getElementById("themeIcon");

      const brandSub  = document.getElementById("brandSub");
      const navServices = document.getElementById("navServices");
      const navPortfolio = document.getElementById("navPortfolio");
      const navContact = document.getElementById("navContact");
      const navAbout = document.getElementById("navAbout");

      const svcWeb = document.getElementById("svcWeb");
      const svcIT = document.getElementById("svcIT");
      const svcInv = document.getElementById("svcInv");
      const svcAuto = document.getElementById("svcAuto");

      const heroTitle = document.getElementById("heroTitle");
      const heroDesc = document.getElementById("heroDesc");

      const langBtn = document.getElementById("langBtn");
      const langMenu = document.getElementById("langMenu");
      const langItems = Array.from(langMenu.querySelectorAll("[data-lang]"));

      const themeBtn = document.getElementById("themeBtn");

      const burgerBtn = document.getElementById("burgerBtn");
      const navLinks = document.getElementById("navLinks");

      const servicesBtn = document.getElementById("servicesBtn");
      const servicesMenu = document.getElementById("servicesMenu");
      const servicesChev = document.getElementById("servicesChev");

      const mediaDark = window.matchMedia ? window.matchMedia("(prefers-color-scheme: dark)") : null;

      function getSavedThemeMode(){
        const v = localStorage.getItem(STORAGE.themeMode);
        return (v === "system" || v === "dark" || v === "light") ? v : "system";
      }
      function getSavedLang(){
        const v = localStorage.getItem(STORAGE.lang);
        return (v === "es" || v === "en") ? v : "es";
      }

      let state = { themeMode: getSavedThemeMode(), lang: getSavedLang() };

      function systemTheme(){
        return (mediaDark && mediaDark.matches) ? "dark" : "light";
      }

      function resolvedTheme(){
        if (state.themeMode === "system") return systemTheme();
        return state.themeMode;
      }

      function applyTheme(){
        const theme = resolvedTheme();
        elHtml.setAttribute("data-theme", theme);

        // swap icons that depend on THEME (resolved)
        brandLogo.src = (theme === "dark") ? ASSETS.brand.dark : ASSETS.brand.light;
        langIcon.src  = (theme === "dark") ? ASSETS.langIcon.dark : ASSETS.langIcon.light;

        // theme button icon (ciclo correcto):
        // - Sistema  -> mostrar icono sistema (segun tema resuelto)
        // - Oscuro   -> mostrar icono claro (ofrece ir a claro)
        // - Claro    -> mostrar icono oscuro (ofrece ir a oscuro)
        if (state.themeMode === "system") {
          themeIcon.src = (theme === "dark")
            ? ASSETS.theme.system.dark
            : ASSETS.theme.system.light;
        } else if (state.themeMode === "dark") {
          themeIcon.src = ASSETS.theme.light;
        } else {
          themeIcon.src = ASSETS.theme.dark;
        }

        const label =
          (state.themeMode === "system")
            ? "Tema: Sistema (clic para Oscuro)"
            : (state.themeMode === "dark")
              ? "Tema: Oscuro (clic para Claro)"
              : "Tema: Claro (clic para Sistema)";
        themeBtn.setAttribute("aria-label", label);
      }

      function cycleThemeMode(){
        // Order requested: Sistema -> Oscuro -> Claro -> Sistema
        state.themeMode = (state.themeMode === "system") ? "dark" : (state.themeMode === "dark") ? "light" : "system";
        localStorage.setItem(STORAGE.themeMode, state.themeMode);
        applyTheme();
      }

      // Follow system changes ONLY if mode == system
      if (mediaDark) {
        mediaDark.addEventListener?.("change", () => {
          if (state.themeMode === "system") applyTheme();
        });
      }

      function applyLang(lang){
        state.lang = lang;
        localStorage.setItem(STORAGE.lang, lang);

        const t = I18N[lang];

        brandSub.textContent = t.brandSub;
        navServices.textContent = t.nav.services;
        navPortfolio.textContent = t.nav.portfolio;
        navContact.textContent = t.nav.contact;
        navAbout.textContent = t.nav.about;

        svcWeb.textContent = t.services.web;
        svcIT.textContent = t.services.it;
        svcInv.textContent = t.services.invites;
        svcAuto.textContent = t.services.auto;

        heroTitle.textContent = t.hero.title;
        heroDesc.textContent = t.hero.desc;

        langItems.forEach(item => {
          const isSelected = item.getAttribute("data-lang") === lang;
          item.setAttribute("aria-selected", isSelected ? "true" : "false");
        });

        document.documentElement.lang = (lang === "en") ? "en" : "es";
      }

      // Language menu
      function closeLangMenu(){
        langMenu.classList.remove("open");
        langBtn.setAttribute("aria-expanded", "false");
      }
      function toggleLangMenu(){
        const open = !langMenu.classList.contains("open");
        if (open){
          langMenu.classList.add("open");
          langBtn.setAttribute("aria-expanded", "true");
        } else {
          closeLangMenu();
        }
      }

      langBtn.addEventListener("click", (e) => { e.stopPropagation(); toggleLangMenu(); });

      langItems.forEach(item => {
        item.addEventListener("click", (e) => {
          e.stopPropagation();
          applyLang(item.getAttribute("data-lang"));
          closeLangMenu();
        });
      });

      themeBtn.addEventListener("click", (e) => {
        e.stopPropagation();
        closeLangMenu();
        cycleThemeMode();
      });

      document.addEventListener("click", () => {
        closeLangMenu();
        navLinks.classList.remove("open");
        burgerBtn.setAttribute("aria-expanded", "false");
        servicesMenu.classList.remove("open");
        servicesChev.classList.remove("up");
        servicesBtn.setAttribute("aria-expanded", "false");
      });

      document.addEventListener("keydown", (e) => {
        if (e.key === "Escape") {
          closeLangMenu();
          servicesMenu.classList.remove("open");
          servicesChev.classList.remove("up");
          servicesBtn.setAttribute("aria-expanded", "false");
        }
      });

      // Mobile burger
      burgerBtn.addEventListener("click", (e) => {
        e.stopPropagation();
        const open = navLinks.classList.toggle("open");
        burgerBtn.setAttribute("aria-expanded", open ? "true" : "false");
        closeLangMenu();
      });
      navLinks.addEventListener("click", (e) => e.stopPropagation());

      // Servicios click only in mobile
      function isMobile(){ return window.matchMedia && window.matchMedia("(max-width: 920px)").matches; }

      servicesBtn.addEventListener("click", (e) => {
        if (!isMobile()) return;
        e.preventDefault();
        e.stopPropagation();
        closeLangMenu();

        const open = !servicesMenu.classList.contains("open");
        servicesMenu.classList.toggle("open", open);
        servicesBtn.setAttribute("aria-expanded", open ? "true" : "false");
        servicesChev.classList.toggle("up", open);
      });
      servicesMenu.addEventListener("click", (e) => e.stopPropagation());

      // Init
      applyTheme();
      applyLang(state.lang);
    })();
  </script>
</body>
</html>
